(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[         0,          0]
NotebookDataLength[      9881,        251]
NotebookOptionsPosition[      8639,        218]
NotebookOutlinePosition[      9044,        235]
CellTagsIndexPosition[      9001,        232]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Read", " ", "Keys", " ", "of", " ", "Roots", " ", "File"}], " ", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"ExternalEvaluate", "[", 
     RowBox[{
     "\"\<Python\>\"", ",", 
      "\"\<import sys; sys.version; import uproot\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
    "filePath", " ", "=", " ", 
     "\"\</Users/ningyan/Desktop/Brown/Roloff/Code/transformer-lund/\
transformerJets.root\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"pythonCode", "=", 
     RowBox[{
      RowBox[{
      "StringTemplate", "[", 
       "\"\<\nimport uproot\n\n# \:6253\:5f00 ROOT \:6587\:4ef6\nfile = \
uproot.open('`filePath`')\n\n# \:83b7\:53d6\:6587\:4ef6\:4e2d\:7684\:6240\
\:6709\:952e\nkeys = list(file.keys())\n\n# \:8fd4\:56de\:952e\:7684\:5217\
\:8868\nkeys\n\>\"", "]"}], "[", 
      RowBox[{"<|", 
       RowBox[{"\"\<filePath\>\"", "->", "filePath"}], "|>"}], "]"}]}], ";"}],
    "\[IndentingNewLine]", "\n", 
   RowBox[{
    RowBox[{"fileKeys", "=", 
     RowBox[{"ExternalEvaluate", "[", 
      RowBox[{"\"\<Python\>\"", ",", "pythonCode"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "fileKeys"}]}]], "Input",
 CellChangeTimes->{{3.9635001454707212`*^9, 3.963500153593918*^9}, {
   3.963519337607506*^9, 3.963519353673449*^9}, {3.963522385979397*^9, 
   3.963522404826971*^9}, {3.964187937934436*^9, 3.964187941119588*^9}, {
   3.9648800044967937`*^9, 3.9648800106183558`*^9}, {3.964887688141201*^9, 
   3.964887691015921*^9}, {3.964887768887968*^9, 3.96488782123313*^9}, {
   3.96488789954453*^9, 3.964887902266364*^9}, {3.964888169575253*^9, 
   3.9648881823978653`*^9}, {3.964888467839376*^9, 3.964888470731332*^9}, 
   3.96488857425315*^9, {3.964888636352405*^9, 3.964888640736979*^9}, {
   3.9648886886190577`*^9, 3.964888688833556*^9}, {3.964889426938305*^9, 
   3.964889430720892*^9}, {3.964930683146085*^9, 3.964930683946219*^9}, {
   3.964985895895866*^9, 3.964985900581254*^9}, {3.964985968732877*^9, 
   3.964985974074543*^9}, {3.964992772759652*^9, 3.964992775044705*^9}, {
   3.9649931887289667`*^9, 3.9649931912508793`*^9}, {3.965026250420804*^9, 
   3.965026276577861*^9}},
 CellLabel->
  "In[293]:=",ExpressionUUID->"8eec0878-656e-456e-9472-a25d00370d33"],

Cell[BoxData[
 RowBox[{"{", "\<\"tree;1\"\>", "}"}]], "Output",
 CellChangeTimes->{
  3.9635193564961243`*^9, 3.963522411302621*^9, 3.963523115193296*^9, 
   3.9641879477404623`*^9, 3.9648800129668303`*^9, 3.9648877858273087`*^9, {
   3.964887822645288*^9, 3.964887837746943*^9}, 3.964887904804491*^9, 
   3.964888187143965*^9, 3.96488847591243*^9, 3.964888577690876*^9, 
   3.9648886531401663`*^9, 3.964888692728592*^9, 3.9648894357150707`*^9, 
   3.964890868390486*^9, 3.9649307615634317`*^9, 3.9649859043706827`*^9, 
   3.96498598004529*^9, 3.9649927798529377`*^9, 3.9649931948595457`*^9, 
   3.964993403598195*^9, 3.96499474734693*^9, {3.9650262631283817`*^9, 
   3.965026277908489*^9}, 3.965026569959944*^9, {3.965028410269112*^9, 
   3.965028416033737*^9}, 3.965033515974409*^9},
 CellLabel->
  "Out[297]=",ExpressionUUID->"2492581d-231d-4ba8-b501-87de7c38eee2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Read", " ", "the", " ", "Keys"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"treeName", "=", "\"\<tree;1\>\""}], ";"}], "\[IndentingNewLine]",
    "\n", 
   RowBox[{
    RowBox[{"pythonCode", "=", 
     RowBox[{
      RowBox[{
      "StringTemplate", "[", 
       "\"\<\nimport uproot\n\n# \:6253\:5f00 ROOT \:6587\:4ef6\nfile = \
uproot.open('`filePath`')\n\n# \:83b7\:53d6\:6811\ntree = \
file['`treeName`'].keys()\n\n# \:8fd4\:8fd8\:6240\:6709\:952e\ntree\n\>\"", 
       "]"}], "[", 
      RowBox[{"<|", 
       RowBox[{
        RowBox[{"\"\<filePath\>\"", "->", "filePath"}], ",", 
        RowBox[{"\"\<treeName\>\"", "->", "treeName"}]}], "|>"}], "]"}]}], 
    ";"}], "\[IndentingNewLine]", "\n", 
   RowBox[{
    RowBox[{"treeData", "=", 
     RowBox[{"ExternalEvaluate", "[", 
      RowBox[{"\"\<Python\>\"", ",", "pythonCode"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "treeData", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Made", " ", "the", " ", "reading", " ", "Function"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "This", " ", "function", " ", "read", " ", "particular", " ", "key", " ", 
     "from", " ", "the", " ", "Root", " ", "Files"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"rroot", "[", 
     RowBox[{"filePath_", ",", "treeName_", ",", "keyName_"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"pythonCode", ",", "keyData"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"pythonCode", "=", 
        RowBox[{
         RowBox[{
         "StringTemplate", "[", 
          "\"\<\nimport uproot\n\n# \:6253\:5f00 ROOT \:6587\:4ef6\nfile = \
uproot.open('`filePath`')\n\n# \:83b7\:53d6\:6811\nkey = \
file['`treeName`']['`keyName`']\n\n# \:8fd4\:8fd8\:6240\:6709\:952e\n\
key.array().tolist()\n\>\"", "]"}], "[", 
         RowBox[{"<|", 
          RowBox[{
           RowBox[{"\"\<filePath\>\"", "->", "filePath"}], ",", 
           RowBox[{"\"\<treeName\>\"", "->", "treeName"}], ",", 
           RowBox[{"\"\<keyName\>\"", "->", "keyName"}]}], "|>"}], "]"}]}], 
       ";", "\[IndentingNewLine]", "\n", 
       RowBox[{"keyData", "=", 
        RowBox[{"ExternalEvaluate", "[", 
         RowBox[{"\"\<Python\>\"", ",", "pythonCode"}], "]"}]}], ";", 
       "keyData"}]}], "]"}]}]}]}]], "Input",
 CellChangeTimes->{{3.963519382504218*^9, 3.963519385608672*^9}, {
  3.964880017719037*^9, 3.964880018889029*^9}},
 CellLabel->
  "In[298]:=",ExpressionUUID->"58e887e8-94a5-4140-b6ba-f7f148b6e179"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"constit_pt\"\>", ",", "\<\"constit_eta\"\>", 
   ",", "\<\"constit_phi\"\>"}], "}"}]], "Output",
 CellChangeTimes->{3.965028416276413*^9, 3.965033518743478*^9},
 CellLabel->
  "Out[301]=",ExpressionUUID->"7c5a975c-05a0-4c96-ad36-e5cafcdca87e"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"conkt", "=", 
   RowBox[{"rroot", "[", 
    RowBox[{"filePath", ",", "treeName", ",", "\"\<constit_pt\>\""}], "]"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"con\[Delta]R", "=", 
   RowBox[{"rroot", "[", 
    RowBox[{"filePath", ",", "treeName", ",", "\"\<constit_eta\>\""}], 
    "]"}]}], ";"}]}], "Input",ExpressionUUID->"0519c472-fc33-4ca8-9381-\
b504acc2d38e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"data", "=", 
   RowBox[{"Transpose", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Log", "[", 
       RowBox[{"1", "/", 
        RowBox[{"Flatten", "[", "con\[Delta]R", "]"}]}], "]"}], ",", 
      RowBox[{"Log", "[", 
       RowBox[{"Flatten", "[", 
        RowBox[{"Abs", "[", "conkt", "]"}], "]"}], "]"}]}], "}"}], "]"}]}], 
  ";"}]], "Input",ExpressionUUID->"23c7f079-d1ae-4838-a832-1df088e77103"],

Cell[BoxData[
 RowBox[{"DensityHistogram", "[", 
  RowBox[{"data", ",", 
   RowBox[{"{", 
    RowBox[{"20", ",", "20"}], "}"}], ",", 
   RowBox[{"ColorFunction", "->", "\"\<BlueGreenYellow\>\""}], ",", 
   RowBox[{"PlotLabel", "->", "\"\<Generated Lund Plane Plot\nEpoch=50\>\""}],
    ",", 
   RowBox[{"ColorFunction", "->", "\"\<BlueGreenYellow\>\""}], ",", 
   RowBox[{"ColorFunctionScaling", "->", "True"}], ",", 
   RowBox[{"FrameLabel", "->", 
    RowBox[{"{", 
     RowBox[{"\"\<log(1/\[CapitalDelta]R)\>\"", ",", "\"\<log(kt)\>\""}], 
     "}"}]}]}], "]"}]], "Input",ExpressionUUID->"5b31e538-ec89-44d0-8119-\
fe3743a6915e"],

Cell[BoxData[{
 RowBox[{"Histogram", "[", 
  RowBox[{
   RowBox[{"Flatten", "[", "con\[Delta]R", "]"}], ",", 
   RowBox[{"Frame", "->", "True"}], ",", 
   RowBox[{"PlotLabel", "->", "\"\<\[Delta]R generate with epoch=50\>\""}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Histogram", "[", 
  RowBox[{
   RowBox[{"Flatten", "[", "conkt", "]"}], ",", 
   RowBox[{"Frame", "->", "True"}], ",", 
   RowBox[{"PlotLabel", "->", "\"\<kt generate with epoch=50\>\""}]}], 
  "]"}]}], "Input",ExpressionUUID->"b2871431-1068-4fb3-ae5e-e678fc5f3bbb"]
},
WindowSize->{808, 862},
WindowMargins->{{4, Automatic}, {Automatic, 4}},
FrontEndVersion->"14.1 for Mac OS X ARM (64-bit) \
(2024\:5e747\:670816\:65e5)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"25881d0b-49e0-428d-a0d5-87ae720d3638"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[422, 15, 2310, 49, 446, "Input",ExpressionUUID->"8eec0878-656e-456e-9472-a25d00370d33"],
Cell[2735, 66, 868, 14, 33, "Output",ExpressionUUID->"2492581d-231d-4ba8-b501-87de7c38eee2"]
}, Open  ]],
Cell[CellGroupData[{
Cell[3640, 85, 2651, 65, 832, "Input",ExpressionUUID->"58e887e8-94a5-4140-b6ba-f7f148b6e179"],
Cell[6294, 152, 287, 6, 33, "Output",ExpressionUUID->"7c5a975c-05a0-4c96-ad36-e5cafcdca87e"]
}, Open  ]],
Cell[6596, 161, 416, 11, 49, "Input",ExpressionUUID->"0519c472-fc33-4ca8-9381-b504acc2d38e"],
Cell[7015, 174, 442, 12, 42, "Input",ExpressionUUID->"23c7f079-d1ae-4838-a832-1df088e77103"],
Cell[7460, 188, 632, 14, 148, "Input",ExpressionUUID->"5b31e538-ec89-44d0-8119-fe3743a6915e"],
Cell[8095, 204, 540, 12, 77, "Input",ExpressionUUID->"b2871431-1068-4fb3-ae5e-e678fc5f3bbb"]
}
]
*)

